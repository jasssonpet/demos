<!DOCTYPE html>

<html>
<head>
  <title>J Library With Sample Plugin</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
    <ul class="sections">
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap for-h1">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              <h1>J Library With Sample Plugin</h1>

            </div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <h2>J library</h2>

            </div>
            
            <div class="content"><div class='highlight'><pre>
<span class="comment">/*jshint newcap: false */</span></pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>Everything inside is visible only in the module.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="keyword">var</span> J = (<span class="keyword">function</span>() {
    <span class="string">'use strict'</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <h3>Helper functions</h3>

            </div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>Checks if the object is a DOM Node.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="function"><span class="keyword">function</span> <span class="title">_isNode</span><span class="params">(obj)</span> {</span>
        <span class="keyword">return</span> obj <span class="keyword">instanceof</span> Node
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>Checks if the object is a string.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="function"><span class="keyword">function</span> <span class="title">_isString</span><span class="params">(obj)</span> {</span>
        <span class="keyword">return</span> <span class="keyword">typeof</span> obj === <span class="string">'string'</span>
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>Works like <code>Array.protype.concat()</code> but doesn&#39;t create a new array.</p>
<pre><code>var source = [1, 2]

_addRange(source, [3, 4]) // Now source is [1, 2, 3, 4]</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="function"><span class="keyword">function</span> <span class="title">_addRange</span><span class="params">(source, elements)</span> {</span>
        <span class="keyword">var</span> i

        <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; elements.length; i++)
            source.push(elements[i])

        <span class="keyword">return</span> source
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>Finds all elements, that match the CSS selector and are subelements of <code>context</code>.</p>
<pre><code>_find(&#39;h1, p&#39;, &#39;#wrapper&#39;) // Matches #wrapper h1, #wrapper p</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="function"><span class="keyword">function</span> <span class="title">_find</span><span class="params">(selector, context)</span> {</span>
        <span class="keyword">var</span> result = []

        context.forEach(<span class="keyword">function</span>(el) {
            _addRange(result, el.querySelectorAll(selector))
        })

        <span class="keyword">return</span> result
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <h3>Constructor</h3>

            </div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>The constructor accepts a string <code>J(&#39;p, div&#39;)</code> or a DOM Node <code>J(document.getElementById(&#39;id&#39;))</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> J = <span class="keyword">function</span>(selector, context) {</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>This check allows us to make new instances without the <code>new</code> keyword.</p>
<pre><code>J(&#39;p&#39;) // Same as new J(&#39;p&#39;)</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="keyword">if</span> (!(<span class="keyword">this</span> <span class="keyword">instanceof</span> J))
            <span class="keyword">return</span> <span class="keyword">new</span> J(selector, context)</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>If there is no context specified, use the root element (<code>html</code> in case of an *.html file).</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        context = context &amp;&amp; context.elements || [document.documentElement]</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>Saves the matched elements as an array in the <code>elements</code> property.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="keyword">this</span>.elements =
            _isNode(selector)   &amp;&amp; [selector] ||
            _isString(selector) &amp;&amp; _find(selector, context)
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <h3>Prototype</h3>

            </div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p>All methods in the prototype are available to all <code>J</code> instances.</p>
<p><em><a href="http://en.wikipedia.org/wiki/Fluent_interface">Chaining</a></em> is possible with <code>return this</code> at the end of every method.</p>
<pre><code>var el = J(&#39;p&#39;)

el.hide()
el.each()
el.on()</code></pre>
<p>Is the same as</p>
<pre><code>J(&#39;p&#39;).hide().each().on()</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>    J.prototype = (<span class="keyword">function</span>() {</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>Function helper for the <code>show</code> and <code>hide</code> methods.</p>
<p><strong>TODO</strong>: Restore the original display (<code>inline, table ...</code>).</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="function"><span class="keyword">function</span> <span class="title">_showHide</span><span class="params">(self, show)</span> {</span>
            <span class="keyword">return</span> self.css(<span class="string">'display'</span>, show ? <span class="string">'block'</span> : <span class="string">'none'</span>)
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>Gets the value of the CSS property for the first element.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="function"><span class="keyword">function</span> <span class="title">_getCSS</span><span class="params">(self, prop)</span> {</span>
            <span class="keyword">var</span> el = self.elements[<span class="number">0</span>]

            <span class="keyword">return</span> getComputedStyle(el).getPropertyValue(prop)
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>Sets the CSS property for every element to the given value.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="function"><span class="keyword">function</span> <span class="title">_setCSS</span><span class="params">(self, prop, value)</span> {</span>
            <span class="keyword">return</span> self.each(<span class="keyword">function</span>(el) {
                el.style[prop] = value
            })
        }

        <span class="keyword">var</span> prototype =</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p>Executes the given callback function for every element.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            { each: <span class="keyword">function</span>(callback) {
                <span class="keyword">this</span>.elements.forEach(callback)

                <span class="keyword">return</span> <span class="keyword">this</span>
            }</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p>Restores the previous <code>display</code> property.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            , show: <span class="keyword">function</span>() {
               <span class="keyword">return</span> _showHide(<span class="keyword">this</span>, <span class="literal">true</span>)
            }</pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p>Saves the current CSS <code>display</code> property of each element and sets it to <code>none</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            , hide: <span class="keyword">function</span>() {
                <span class="keyword">return</span> _showHide(<span class="keyword">this</span>, <span class="literal">false</span>)
            }</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <p>Attaches an event listener to every element.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            , on: <span class="keyword">function</span>(event, callback) {
                <span class="keyword">return</span> <span class="keyword">this</span>.each(<span class="keyword">function</span>(el) {
                    el.addEventListener(event, callback, <span class="literal">false</span>)
                })
            }</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <p><strong>TODO</strong>: Add <code>mouseenter</code> event to non-IE browsers.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            , mouseenter: <span class="keyword">function</span>(callback) {
                <span class="keyword">return</span> <span class="keyword">this</span>.on(<span class="string">'mouseover'</span>, callback)
            }</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <p><strong>TODO</strong>: Add <code>mouseleave</code> event to non-IE browsers.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            , mouseleave: <span class="keyword">function</span>(callback) {
                <span class="keyword">return</span> <span class="keyword">this</span>.on(<span class="string">'mouseout'</span>, callback)
            }</pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <p>Get or set the CSS property.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            , css: <span class="keyword">function</span>(property, value) {
                <span class="keyword">return</span> value == <span class="literal">null</span> ?
                    _getCSS(<span class="keyword">this</span>, property) :
                    _setCSS(<span class="keyword">this</span>, property, value)
            }
        }

        <span class="keyword">return</span> prototype
    }())</pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <p>Exposes the constructor to the global scope.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">return</span> J
}())</pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <h2>J plugin</h2>
<p>Each plugin should extend the <code>prototype</code> to make the new methods available to all <code>J</code> instances.</p>

            </div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <p><strong>Usage</strong>:</p>
<p>Use <code>data-*</code> for scripting and <code>class</code> for styling.</p>
<pre><code> &lt;div class=&quot;menu&quot; data-menu&gt;
     &lt;a href=&quot;#&quot;&gt;Menu&lt;/a&gt;

     &lt;ul class=&quot;menu-content&quot; data-content&gt;
         &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Menu Item 1&lt;/a&gt;&lt;/li&gt;
         &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Menu Item 2&lt;/a&gt;&lt;/li&gt;
         &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Menu Item 3&lt;/a&gt;&lt;/li&gt;
     &lt;/ul&gt;
 &lt;/div&gt;</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>;(<span class="keyword">function</span>($) {
    <span class="string">'use strict'</span>;

    $.prototype.menu = (<span class="keyword">function</span>() {
        <span class="keyword">var</span> _delay = <span class="number">500</span>

        <span class="keyword">return</span> <span class="keyword">function</span>() {
            <span class="keyword">this</span>.each(<span class="keyword">function</span>(el) {
                <span class="keyword">var</span> self = $(el)</pre></div></div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <p><strong>TODO</strong>: Nested menus.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                  , content = $(<span class="string">'[data-content]'</span>, self)</pre></div></div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>
              <p>Shows the menu after a specific delay.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                  , timer</pre></div></div>
            
        </li>
        
        
        <li id="section-31">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-31">&#182;</a>
              </div>
              <p>Function helper for the <code>show</code> and <code>hide</code> methods.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                <span class="function"><span class="keyword">function</span> <span class="title">_showHide</span><span class="params">(show)</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-32">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-32">&#182;</a>
              </div>
              <p>Remove the previous timer, when the user triggers the event too rapidly.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                    clearTimeout(timer)

                    timer = setTimeout(<span class="keyword">function</span>() {
                        content[show ? <span class="string">'show'</span> : <span class="string">'hide'</span>]()
                    }, _delay)
                }</pre></div></div>
            
        </li>
        
        
        <li id="section-33">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-33">&#182;</a>
              </div>
              <p>Hides the content at start.
Use CSS to do it before the plugin is loaded to avoid jumping.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                content.hide()</pre></div></div>
            
        </li>
        
        
        <li id="section-34">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-34">&#182;</a>
              </div>
              <p><strong>TODO</strong>: Touch events.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                self.mouseenter(<span class="keyword">function</span>() {
                    _showHide(<span class="literal">true</span>)
                }).mouseleave(<span class="keyword">function</span>() {
                    _showHide(<span class="literal">false</span>)
                })
            })
        }
    }())</pre></div></div>
            
        </li>
        
        
        <li id="section-35">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-35">&#182;</a>
              </div>
              <p>Initialize all menus.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    $(<span class="string">'[data-menu]'</span>).menu()
}(J))</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
